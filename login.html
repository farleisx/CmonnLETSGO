// api/login.js
import fs from 'fs';
import path from 'path';

export default async function handler(req,res){
  if(req.method !== 'POST') return res.status(405).json({error:'Method not allowed'});
  const {username,password}=req.body;
  const filePath = path.join(process.cwd(),'api','users.json');
  const users = JSON.parse(fs.readFileSync(filePath,'utf8'));
  const user = users.find(u=>u.username===username && u.password===password);
  if(!user) return res.json({success:false,error:'Invalid credentials'});
  res.json({success:true});
}
